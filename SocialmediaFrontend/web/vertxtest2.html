<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <script type="text/javascript">
            var vertx = require('vertx');
            //var host = "ws://localhost:10000";
            //var wSocket = new WebSocket(host);
            alert("doing stuff");
            var client = vertx.createNetClient();
            
            function init() {
                alert("doing stuff init before vertx");
                var vertx = require('vertx');
                //var host = "ws://localhost:10000";
                //var wSocket = new WebSocket(host);
                alert("doing stuff init");
                var client = vertx.createNetClient();
                client.connect(10000, 'localhost', function(err, sock) {
                    if (!err) {
                        alert(" Web Socket is connected, sending data");
                        //console.log('We have connected');
                    }
                    else {
                        alert("Fel!");
                        
                    }
                });
            
            
                /*host = "ws://localhost:10000";
                wSocket = new WebSocket(host);
                wSocket.onopen = function() {
                    alert(" Web Socket is connected, sending data");
                    wSocket.send("hello you bastard");
                };
                wSocket.onerror = function() {
                    alert("Fel!");
                };*/
            }
            
            // called when a message is received
            wSocket.onmessage = function(event) {
                var received_msg = event.data;
                document.getElementById("chat").value = received_msg;
                alert(received_msg);
            };
            // called when socket closes
            wSocket.onclose = function() {
                alert("Connection is closed...");
            }; 
        </script>
    </head>
    
    <body>
        <h3>Hej</h3><br>
        <form id="tjo">
            <button onclick="init()">Click me</button><br>
            <input type="text" id="hej"/><br>
            <textarea id="chat"></textarea><br>
        </form>
    </body>
</html>